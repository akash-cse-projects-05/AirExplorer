<% layout("layouts/boilerplate") %>
<body>
    <h3>Listing Details</h3>
    <div class="main-content">
        <div class="card">
            <img src="<%= listing.image %>" class="card-img-top" alt="<%= listing.title %>">
            <div class="card-body">
                <h5 class="card-title"><%= listing.title %></h5>
                <p class="card-text">
                    <strong>Listing Owner:</strong> <%= listing.owner %><br>
                    <strong>Description:</strong> <%= listing.description %><br>
                    <strong>Price:</strong> &#8377; <%= listing.price.toLocaleString("en-IN") %><br>
                    <strong>Location:</strong> <%= listing.location %><br>
                    <strong>Country:</strong> <%= listing.country %>
                </p>
                <a href="/listings/<%= listing._id %>/edit" class="btn btn-primary" style="background-color: black; color: white;">Edit</a>
    
               
            </div>
            
            
        </div>
        <div>
            <div class="airbnb-billing-card">
                <h5 class="billing-title">Billing Details</h5>
                
                <!-- Total Cost -->
                <div class="cost-summary">
                    <p><h5>Total Cost:â‚¹<%=listing.price%></h5> </p>
                </div>
                
                <!-- Check-in and Check-out -->
                <div class="date-summary">
                
                </div>
            
                <form action="/process-payment" method="POST">
                    <!-- Name -->
                    <div class="form-group">
                        Name: 
                        <input type="text" id="name" name="name" class="form-control" placeholder="Your Full Name" required>
                    </div>
                    <div class="form-group" class="icon">
                        Proceed Through: <button class="btn btn-outline-primary"><i class="fa-brands fa-google-pay fa-2xl"></i></button>
                        <button class="btn btn-outline-secondary"><i class="fa-brands fa-amazon-pay fa-2xl"></i></button>
                        <button class="btn btn-outline-dark"><i class="fa-brands fa-apple-pay fa-2xl"></i></button>

                    </div>
            
                    <!-- Card Number -->
                    <div class="form-group">
                        Credit-Card: <button class="btn btn-outline-dark"><i class="fa-brands fa-cc-visa fa-2xl"></i></button><br><br>
                        Card Number:
                        <input type="text" id="card-number" name="card_number" class="form-control" placeholder="" required>
                    </div>
            
                    <!-- CVV -->
                    <div class="form-group">
                        CVV:
                        <input type="password" id="cvv" name="cvv" class="form-control" placeholder="Enter your cvv here" required>
                    </div>
            
                    <!-- Pay Button -->
                    <button type="submit" class="btn btn-danger" styles="color:red">Pay Now</button>
                </form>
            </div>
            
            
        </div>
        
     
    </div><hr>
    
<div class="container mt-5">
    <div class="col-8 offset-2">
        <h4>Leave a Review</h4>
        <form action="/listings/<%= listing._id %>/reviews" method="POST" novalidate class="need-validation">
            <div class="mb-3 mt-3">
                <label for="rating">Rating</label>
                <input type="range" min="1" max="5" id="review[rating]" name="review[rating]" class="form-range">
            </div>
            <div class="mb-3 mt-3">
                <label for="comment">Comment</label>
                <textarea name="review[comment]" id="comment" cols="30" rows="5" class="form-control"></textarea>
            </div>
            <button type="submit" class="btn btn-outline-dark">Submit</button>
        </form>
        <hr>
        <h3>All Reviews</h3>
        <div class="row">
        <% listing.reviews.forEach(function(review) { %> <!-- Loop through reviews array -->
          <div class="card col-5 mb-3" style="margin:10px">
            <div clas="card-body">
                <h5 class="card-title"><%=listing.title%></h5>
                <p class="card-text"><%=review.comment%></p>
                <p class="card-text"><%=review.rating%></p>
            </div><br>
            <form class="mb-3" method="POST" action="/listings/<%=listing._id%>/reviews/<%=review._id%>?_method=DELETE">

                <button class="btn btn-sm btn-dark">Delete</button>
            </form><br>
        
          </div><br>
        <% }); %>
    </div>
    </div>
    </div>
</div><br><br>
</body>

<style>
    body {
        display: flex;
        flex-direction: column;
        min-height: 100vh;
    }
    
    
        .main-content {
            flex: 1;
            display: flex;
            justify-content: space-around;
            align-items: center;
            gap:20px;
        
        }
        .card {
            width: 24rem; /* Adjust the width as needed */
            position: sticky;
            top: 20px; /* Adjust this value as needed */
        }
    footer {
        margin-top: auto; 
    /* Pushes the footer to the bottom of the page */
    }
    /* Airbnb Billing Card */
.airbnb-billing-card {
    width: 500px;
    margin: 0 auto;
    padding: 20px;
    border: 1px solid #ddd;
    border-radius: 10px;
    background-color: #fff;
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
}

/* Title */
.billing-title {
    font-size: 1.5rem;
    margin-bottom: 20px;
    text-align: center;
    color: #333;
}

/* Cost Summary */
.cost-summary {
    font-size: 1.2rem;
    margin-bottom: 15px;
    text-align: center;
    color: #000;
}

/* Date Summary */
.date-summary p {
    font-size: 1rem;
    margin: 5px 0;
    text-align: center;
    color: #555;
}

/* Form Fields */
.form-group {
    margin-bottom: 15px;
}

.form-group label {
    display: block;
    font-weight: bold;
    margin-bottom: 5px;
    color: #333;
}

.form-group input {
    width: 100%;
    padding: 10px;
    font-size: 1rem;
    border: 1px solid #ddd;
    border-radius: 5px;
    box-sizing: border-box;
}

/* Pay Button */
.b {
    display: block;
    width: 100%;
    padding: 10px;
    font-size: 1rem;
    text-align: center;
    color: #fff;
    /*background-color: #ff5a5f;*/
    border: none;
    border-radius: 5px;
    cursor: pointer;
}

/*.btn:hover {
    
}*/


    
</style>